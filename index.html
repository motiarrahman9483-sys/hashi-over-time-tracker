<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overtime - Hashi Akter</title>
    <style>
        /* --- CSS STYLES: Professional & Clean (English Naming) --- */
        :root {
            --primary-color: #007BFF; /* Blue */
            --secondary-color: #6C757D; /* Gray */
            --light-bg: #F8F9FA; /* Light Gray Background */
            --white: #FFFFFF;
            --font-color: #343A40; /* Dark Font */
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--light-bg);
            color: var(--font-color);
            margin: 0;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 950px;
            background-color: var(--white);
            border-radius: 12px;
            box-shadow: 0 5px 20px var(--shadow-color);
            padding: 25px;
        }

        /* --- Header & Title --- */
        header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--light-bg);
            padding-bottom: 15px;
        }

        h1 {
            font-size: 2.2em;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 1em;
            color: var(--secondary-color);
            margin-top: 5px;
        }
        
        /* --- Filter & Navigation --- */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .nav-buttons button, #filter-select {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            margin: 5px 2px;
            transition: background-color 0.3s;
        }

        #filter-select {
            padding: 8px;
            margin-left: 10px;
            min-width: 150px;
        }
        
        .nav-buttons {
            display: flex;
            align-items: center;
        }

        #current-month {
            font-size: 1.5em;
            color: var(--font-color);
            font-weight: bold;
            text-align: center;
            margin: 0 15px;
        }

        /* --- Totals Display --- */
        .totals {
            width: 100%;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1em;
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 10px;
            background-color: #EAF4FF; /* Very light blue */
        }
        
        #total-overtime-display {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.3em;
        }

        /* --- Calendar Grid --- */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .day-header {
            background-color: var(--secondary-color);
            color: var(--white);
            font-weight: bold;
            padding: 8px 4px;
            text-align: center;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .day-cell {
            background-color: var(--white);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 80px;
            border: 1px solid var(--light-bg);
            border-radius: 4px;
            padding: 6px 2px;
        }

        .day-date {
            font-weight: bold;
            font-size: 1em;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .input-group {
            width: 90%;
            text-align: center;
            margin-top: 5px;
        }

        .input-group label {
            font-size: 0.75em;
            color: var(--font-color);
            display: block;
            margin-bottom: 2px;
        }

        .input-group input {
            width: 80%;
            padding: 4px;
            border: 1px solid var(--secondary-color);
            border-radius: 4px;
            font-size: 0.8em;
            text-align: center;
        }
        
        .not-current-month {
            background-color: #F1F1F1;
            color: #aaa;
            opacity: 0.8;
            pointer-events: none;
        }

        /* --- Footer --- */
        footer {
            margin-top: 30px;
            padding-top: 15px;
            text-align: center;
            font-style: italic;
            font-size: 1.1em;
            color: var(--secondary-color);
            border-top: 1px solid var(--secondary-color);
        }
        
        /* --- Responsive Adjustments --- */
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            .nav-buttons {
                margin-top: 10px;
                order: 1;
                width: 100%;
                justify-content: space-around;
            }
            #current-month {
                order: 0;
                margin-bottom: 10px;
            }
            .totals {
                font-size: 1em;
            }
            .calendar {
                gap: 3px;
            }
            .day-cell {
                 min-height: 70px;
                 padding: 4px 1px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Overtime Tracker - Hashi Akter</h1> 
            <p class="subtitle">Company: Jumer Fashion Ltd. | Section: Finishing</p>
        </header>

        <div class="controls">
            <div class="nav-buttons">
                <button id="prev-month">◀ Prev Month</button>
                <div id="current-month"></div>
                <button id="next-month">Next Month ▶</button>
            </div>
            <div class="filter-group">
                <label for="filter-select" style="font-size:0.9em; margin-right:5px;">Filter:</label>
                <select id="filter-select">
                    <option value="monthly">This Month Total</option>
                    <option value="alltime">All Time Total</option>
                    <option value="last6months">Last 6 Months</option>
                    <option value="last12months">Last 1 Year</option>
                </select>
            </div>
        </div>

        <div class="totals">
            <p>Total Overtime in Selected Period:</p>
            <p id="total-overtime-display">0 Hours</p>
        </div>

        <div class="calendar" id="calendar-grid">
            </div>
    </div>

    <footer>
        <p>আপনার প্রতিটি অতিরিক্ত ঘণ্টা কেবল সময়ের হিসাব নয়, ভবিষ্যতের ভিত্তি স্থাপন।</p>
    </footer>

    <script>
        // --- JAVASCRIPT LOGIC ---
        const MONTH_NAMES = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const DAY_NAMES = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]; 
        const STORAGE_KEY = 'hashi_overtime_tracker_data_v2'; 
        
        let currentDate = new Date();
        let currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth();

        let overtimeData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
        let currentFilter = 'monthly';

        function saveOvertimeData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(overtimeData));
            updateTotals();
        }

        function createKey(year, month, day) {
            return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        }
        
        function renderCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            const currentMonthDisplay = document.getElementById('current-month');
            if (!calendarGrid || !currentMonthDisplay) return;

            calendarGrid.innerHTML = ''; 
            currentMonthDisplay.textContent = `${MONTH_NAMES[currentMonth]} ${currentYear}`;

            DAY_NAMES.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                calendarGrid.appendChild(header);
            });

            const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
            const startDay = firstDayOfMonth.getDay(); 
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
            const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();

            for (let i = 0; i < startDay; i++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell not-current-month';
                dayCell.innerHTML = `<div class="day-date"></div>`; 
                calendarGrid.appendChild(dayCell);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const key = createKey(currentYear, currentMonth, day);
                const data = overtimeData[key] || { overtime: '' };

                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell';
                dayCell.innerHTML = `
                    <div class="day-date">${day}</div>
                    <div class="input-group">
                        <label for="ot-${key}">Overtime (Hours):</label>
                        <input type="number" id="ot-${key}" data-key="${key}" data-type="overtime" placeholder="OT" value="${data.overtime}" min="0" step="0.5">
                    </div>
                `;
                calendarGrid.appendChild(dayCell);
            }
            
            const totalCells = startDay + daysInMonth;
            const totalGridSlots = 7 * Math.ceil(totalCells / 7);
            let cellsToAdd = totalGridSlots - totalCells;

            for (let i = 1; i <= cellsToAdd; i++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell not-current-month';
                dayCell.innerHTML = `<div class="day-date"></div>`;
                calendarGrid.appendChild(dayCell);
            }
            
            calendarGrid.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', handleInputChange);
            });
        }

        function handleInputChange(event) {
            const input = event.target;
            const key = input.dataset.key;
            const type = input.dataset.type;
            
            if (!overtimeData[key]) {
                overtimeData[key] = { overtime: '' };
            }

            let value = input.value;
            if (value === "") {
                overtimeData[key][type] = '';
            } else {
                overtimeData[key][type] = parseFloat(value);
            }
            
            saveOvertimeData();
        }
        
        function getDateRange(filterType) {
            const today = new Date();
            today.setHours(0, 0, 0, 0); 
            let startDate;
            let endDate = today; 

            if (filterType === 'monthly') {
                startDate = new Date(currentYear, currentMonth, 1);
                endDate = new Date(currentYear, currentMonth + 1, 0); 
                endDate.setHours(0, 0, 0, 0);
            } else if (filterType === 'last6months') {
                startDate = new Date(today.getFullYear(), today.getMonth() - 5, 1);
            } else if (filterType === 'last12months') {
                startDate = new Date(today.getFullYear() - 1, today.getMonth(), 1);
            } else { // alltime
                return { isAllTime: true };
            }
            
            return { startDate, endDate };
        }

        function calculateTotals() {
            let total = 0;
            const range = getDateRange(currentFilter);
            
            for (const key in overtimeData) {
                const data = overtimeData[key];
                const ot = parseFloat(data.overtime) || 0;
                
                if (range.isAllTime) {
                    total += ot;
                } else {
                    // Key is in format YYYY-MM-DD
                    const [y, m, d] = key.split('-').map(Number);
                    const entryDate = new Date(y, m - 1, d); 
                    entryDate.setHours(0, 0, 0, 0);
                    
                    if (entryDate >= range.startDate && entryDate <= range.endDate) {
                        total += ot;
                    }
                }
            }
            
            return total.toFixed(1);
        }

        function updateTotals() {
            const total = calculateTotals();
            const totalDisplayElement = document.getElementById('total-overtime-display');
            
            if (totalDisplayElement) {
                totalDisplayElement.textContent = `${total} Hours`; 
            }
        }

        function navigateMonth(direction) {
            currentMonth += direction;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            document.getElementById('filter-select').value = 'monthly'; 
            currentFilter = 'monthly';
            renderCalendar();
            updateTotals();
        }
        
        function handleFilterChange(event) {
            currentFilter = event.target.value;
            updateTotals();
        }
        
        // Initialize App and attach event listeners on load
        window.addEventListener('load', function() {
            renderCalendar(); 
            
            const filterSelect = document.getElementById('filter-select');
            filterSelect.value = currentFilter;
            updateTotals();

            const prevButton = document.getElementById('prev-month');
            const nextButton = document.getElementById('next-month');
            
            if (prevButton) {
                prevButton.addEventListener('click', () => navigateMonth(-1));
            }
            if (nextButton) {
                nextButton.addEventListener('click', () => navigateMonth(1));
            }
            if (filterSelect) {
                filterSelect.addEventListener('change', handleFilterChange);
            }
        });
    </script>
</body>
</html>
