<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hashi Akter ♡ Overtime Tracker</title>
    <style>
        /* --- CSS STYLES: Pink-White-Light Purple Mix --- */
        :root {
            --pink-light: #FFC0CB; /* Light Pink */
            --pink-medium: #FF69B4; /* Hot Pink */
            --purple-light: #E6E6FA; /* Lavender/Light Purple */
            --white: #FFFFFF;
            --font-color: #4B0082; /* Indigo for contrast */
            --shadow-color: rgba(189, 114, 219, 0.3);
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--purple-light);
            color: var(--font-color);
            margin: 0;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 25px var(--shadow-color);
            padding: 20px;
        }

        /* --- Header & Title --- */
        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            color: var(--pink-medium);
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px var(--pink-light);
        }

        .love-message-small {
            font-style: italic;
            font-size: 1.1em;
            color: var(--pink-medium);
        }

        /* --- Navigation & Totals --- */
        .nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .nav-header button {
            background-color: var(--pink-medium);
            color: var(--white);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
            margin: 5px;
        }

        .nav-header button:hover {
            background-color: #C71585; /* Darker Pink */
        }

        #current-month {
            font-size: 1.8em;
            color: var(--font-color);
            font-weight: bold;
            text-align: center;
            flex-grow: 1;
        }

        .totals {
            width: 100%;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            border-top: 2px dashed var(--pink-light);
            padding-top: 15px;
        }

        #total-overtime-all-time {
            font-weight: bold;
            color: var(--pink-medium);
            margin-top: 5px;
        }

        /* --- Calendar Grid --- */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .day-header, .day-cell {
            padding: 8px 4px;
            text-align: center;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .day-header {
            background-color: var(--pink-light);
            color: var(--font-color);
            font-weight: bold;
            padding: 10px 5px;
        }

        .day-cell {
            background-color: var(--white);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100px;
            border: 1px solid var(--pink-light);
            border-radius: 5px;
        }

        .day-date {
            font-weight: bold;
            font-size: 1.2em;
            color: var(--pink-medium);
        }

        .input-group {
            margin-top: 5px;
            width: 90%;
            text-align: left;
        }

        .input-group label {
            display: block;
            font-size: 0.75em;
            color: var(--font-color);
            margin-bottom: 2px;
        }

        .input-group input {
            width: 90%;
            padding: 4px;
            border: 1px solid var(--pink-medium);
            border-radius: 4px;
            font-size: 0.85em;
            background-color: var(--white);
            text-align: center;
        }
        
        /* Highlight cells that are not in the current month */
        .not-current-month {
            background-color: #F8F8FF; /* Lighter background */
            color: #ccc;
            opacity: 0.6;
            pointer-events: none; /* Disable interaction */
        }

        /* --- Footer Love Note --- */
        footer {
            margin-top: 40px;
            padding: 20px 0;
            text-align: center;
            font-style: italic;
            font-size: 1.3em;
            color: var(--pink-medium);
            border-top: 2px solid var(--pink-light);
            width: 100%;
            max-width: 900px;
        }
        
        /* --- Responsive Adjustments --- */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8em;
            }
            .love-message-small {
                font-size: 0.9em;
            }
            #current-month {
                font-size: 1.5em;
                width: 100%;
                order: 0;
                margin-bottom: 15px;
            }
            .nav-header {
                justify-content: center;
            }
            .day-cell {
                min-height: 80px;
            }
            .day-date {
                font-size: 1em;
            }
            .totals {
                font-size: 1em;
            }
            footer {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Hashi Akter ♡ Overtime Tracker</h1>
            <p class="love-message-small">তোমার জন্যই বানিয়েছি জান ♡</p>
        </header>

        <div class="nav-header">
            <button id="prev-month">◀ আগের মাস</button>
            <div id="current-month"></div>
            <button id="next-month">পরের মাস ▶</button>
        </div>

        <div class="totals">
            <p id="total-overtime-month">এই মাসে মোট ওভারটাইম: 0 ঘণ্টা</p>
            <p id="total-overtime-all-time">শুরু থেকে এখন পর্যন্ত মোট ওভারটাইম: 0 ঘণ্টা ♡</p>
        </div>

        <div class="calendar" id="calendar-grid">
            </div>
    </div>

    <footer>
        <p>তুমি যতই পরিশ্রম করো, আমি তোমাকে ততই ভালোবাসি ♡ – তোমার স্বামী</p>
    </footer>

    <script>
        // --- JAVASCRIPT LOGIC ---
        const MONTH_NAMES = ["জানুয়ারি", "ফেব্রুয়ারি", "মার্চ", "এপ্রিল", "মে", "জুন", "জুলাই", "আগস্ট", "সেপ্টেম্বর", "অক্টোবর", "নভেম্বর", "ডিসেম্বর"];
        const DAY_NAMES = ["রবি", "সোম", "মঙ্গল", "বুধ", "বৃহস্পতি", "শুক্র", "শনি"];
        const STORAGE_KEY = 'hashi_overtime_tracker_data';
        
        let currentDate = new Date();
        let currentYear = currentDate.getFullYear();
        let currentMonth = currentDate.getMonth();

        // Load data from localStorage
        let overtimeData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};

        function saveOvertimeData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(overtimeData));
            updateTotals();
        }

        function createKey(year, month, day) {
            // YYYY-MM-DD format
            return `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        }

        function renderCalendar() {
            const calendarGrid = document.getElementById('calendar-grid');
            const currentMonthDisplay = document.getElementById('current-month');
            if (!calendarGrid || !currentMonthDisplay) return;

            calendarGrid.innerHTML = ''; // Clear previous grid
            
            // Display current month and year
            currentMonthDisplay.textContent = `${MONTH_NAMES[currentMonth]} ${currentYear}`;

            // Add Day Headers
            DAY_NAMES.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                calendarGrid.appendChild(header);
            });

            // Determine the first day of the month and its week day
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
            const startDay = firstDayOfMonth.getDay(); // 0 for Sunday, 6 for Saturday

            // Determine the number of days in the month
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            // Calculate days from the previous month (for padding)
            const daysInPrevMonth = new Date(currentYear, currentMonth, 0).getDate();

            // Add previous month's days for padding
            for (let i = 0; i < startDay; i++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell not-current-month';
                dayCell.innerHTML = `<div class="day-date">${daysInPrevMonth - startDay + i + 1}</div>`;
                calendarGrid.appendChild(dayCell);
            }

            // Add current month's days
            for (let day = 1; day <= daysInMonth; day++) {
                const key = createKey(currentYear, currentMonth, day);
                const data = overtimeData[key] || { duty: '', overtime: '' };

                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell';
                dayCell.innerHTML = `
                    <div class="day-date">${day}</div>
                    <div class="input-group">
                        <label for="duty-${key}">ডিউটি (ঘণ্টা):</label>
                        <input type="number" id="duty-${key}" data-key="${key}" data-type="duty" placeholder="D" value="${data.duty}" min="0" step="1">
                    </div>
                    <div class="input-group">
                        <label for="ot-${key}">ওভারটাইম (ঘণ্টা):</label>
                        <input type="number" id="ot-${key}" data-key="${key}" data-type="overtime" placeholder="OT" value="${data.overtime}" min="0" step="0.5">
                    </div>
                `;
                calendarGrid.appendChild(dayCell);
            }
            
            // Add next month's days for padding (to fill the grid)
            const totalCells = startDay + daysInMonth;
            const totalGridSlots = 7 * Math.ceil(totalCells / 7);
            let cellsToAdd = totalGridSlots - totalCells;

            for (let i = 1; i <= cellsToAdd; i++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'day-cell not-current-month';
                dayCell.innerHTML = `<div class="day-date">${i}</div>`;
                calendarGrid.appendChild(dayCell);
            }
            
            // Attach input event listeners
            calendarGrid.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', handleInputChange);
            });
        }

        function handleInputChange(event) {
            const input = event.target;
            const key = input.dataset.key;
            const type = input.dataset.type;
            
            // Ensure data object exists for the key
            if (!overtimeData[key]) {
                overtimeData[key] = { duty: '', overtime: '' };
            }

            // Update the stored value, ensuring numerical format if not empty
            let value = input.value;
            if (value === "") {
                overtimeData[key][type] = '';
            } else {
                overtimeData[key][type] = parseFloat(value);
            }
            
            // Save data and update totals
            saveOvertimeData();
        }

        function calculateTotals() {
            let monthlyTotal = 0;
            let allTimeTotal = 0;
            
            const currentMonthKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}`;

            for (const key in overtimeData) {
                const data = overtimeData[key];
                
                // Ensure overtime value is a number
                const ot = parseFloat(data.overtime) || 0;
                
                // Calculate All-Time Total
                allTimeTotal += ot;
                
                // Check if the key belongs to the current displayed month
                if (key.startsWith(currentMonthKey)) {
                    monthlyTotal += ot;
                }
            }
            
            return {
                monthly: monthlyTotal.toFixed(1),
                allTime: allTimeTotal.toFixed(1)
            };
        }

        function updateTotals() {
            const totals = calculateTotals();
            const totalMonthElement = document.getElementById('total-overtime-month');
            const totalAllTimeElement = document.getElementById('total-overtime-all-time');
            
            if (totalMonthElement) {
                totalMonthElement.textContent = `এই মাসে মোট ওভারটাইম: ${totals.monthly} ঘণ্টা`;
            }
            if (totalAllTimeElement) {
                totalAllTimeElement.textContent = `শুরু থেকে এখন পর্যন্ত মোট ওভারটাইম: ${totals.allTime} ঘণ্টা ♡`;
            }
        }

        function navigateMonth(direction) {
            currentMonth += direction;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendar();
            updateTotals();
        }

        // Initialize App and attach event listeners on load
        window.addEventListener('load', function() {
            renderCalendar(); 
            updateTotals();
            
            const prevButton = document.getElementById('prev-month');
            const nextButton = document.getElementById('next-month');
            
            if (prevButton) {
                prevButton.addEventListener('click', () => navigateMonth(-1));
            }
            if (nextButton) {
                nextButton.addEventListener('click', () => navigateMonth(1));
            }
        });
        
    </script>
</body>
  </html>
